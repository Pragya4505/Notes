<!DOCTYPE html>
<html>
  <head>
    <title>Welcome, <%=userData.name%></title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://site-assets.fontawesome.com/releases/v6.4.2/css/all.css"
    />
    <link rel="stylesheet" href="homepage.css">
  </head>
  <body>
    <nav class="navbar bg-body-tertiary navbar1">
      <div class="container-fluid">
        <span
          class="navbar-brand mb-0 h1"
          style="
            color: white;
            padding: 0.8rem !important;
            font-size: 30px;
            font-family: 'Berkshire Swash', cursive;
          "
          >iNote <i class="fa-duotone fa-file-pen"></i>
          </span>
      </div>
    </nav>
    <div class="container mt-5">
      <div class="jumbotron">
        <h1 class="display-4">Welcome, <%= userData.name %>!</h1>
      </div>
      <button class="btn btn-danger mt-3" onclick="signOut()">Logout
        &nbsp;<i class="fa-duotone fa-right-from-bracket"></i></button>
      <div
        id="err"
        class="alert alert-danger my-3"
        role="alert"
        style="display: none"
      >
        User Logged out .. Redirecting you to Login Page !!
      </div>
      <hr />
      <div class="cotainer-sm text-end">
        <button
          class="btn btn-primary"
          data-bs-toggle="modal"
          data-bs-target="#exampleModal"
        >
        <i class="fa-duotone fa-file-plus"></i>&nbsp; Add New Note
        </button>
      </div>
      <div class="container-sm">
        <div class="row row-cols-3">
          <% if (userNotes.length === 0 || userNotes===null) { %>
          <div class="col mt-4">
            <p>No Notes added yet. Please add one !</p>
          </div>
          <% } else { %> <% userNotes.forEach(function(note) { %>
          <div class="col mt-4">
            <div class="card col">
              <div class="card-body">
                <h5 class="card-title"><%= note.title %></h5>
                <h6 class="card-subtitle mb-2 text-muted"><%=note.time%></h6>
                <p class="card-text"><%= note.content %></p>
                <div class="edit-delete-icons">
                  <a href="#" class="edit-icon"><i class="fas fa-edit"></i></a>
                  <a class="delete-icon" data-note-id="<%= note._id %>"><i class="fas fa-trash"></i></a>
                </div>
              </div>
            </div>
          </div>
          <% }); %> <% } %>
        </div>
      </div>
    </div>
    <!-- Button trigger modal -->

    <!-- Modal -->
    <div
      class="modal fade newNote"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">New Note</h1>
            <button
              type="button"
              class="btn-close"
              id="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label for="formGroupExampleInput" class="form-label"
                >Note Title</label
              >
              <input
                type="text"
                class="form-control"
                id="note-title"
                name="formGroupExampleInput"
              />
            </div>

            <div class="mb-3">
              <label for="floatingTextarea2" class="form-label">Content</label>
              <textarea
                class="form-control"
                name="floatingTextarea2"
                id="note-content"
                style="height: 100px"
              ></textarea>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-danger"
              data-bs-dismiss="modal"
            >
              Cancel
            </button>
            <button type="button" class="btn btn-primary" onclick="onAdd()">
              Add Note
            </button>
          </div>
        </div>
      </div>
    </div>
    <button type="button" class="btn btn-primary" id="liveToastBtn">Show live toast</button>

<div class="toast-container position-fixed bottom-0 end-0 p-3">
  <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
      <strong class="me-auto">iNote</strong>
      <small>Just Now</small>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body">
      New Note Added
    </div>
  </div>
</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="homepage.js"></script>
    <script>
      const toastTrigger = document.getElementById("liveToastBtn");
      const toastLiveExample = document.getElementById("liveToast");

      if (toastTrigger) {
        const toastBootstrap = bootstrap.Toast.getOrCreateInstance(toastLiveExample);
        toastTrigger.addEventListener("click", () => {
          toastBootstrap.show();
        });
      }
    </script>
  </body>
</html>
